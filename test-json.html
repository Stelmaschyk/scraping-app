<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test JSON Scraping</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .response {
            margin-top: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
            white-space: pre-wrap;
        }
        input, select {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è JSON Scraping API</h1>
    
    <div class="test-section">
        <h2>üìù –¢–µ—Å—Ç –æ–±—Ä–æ–±–∫–∏ JSON</h2>
        <p>–¶–µ–π —Ç–µ—Å—Ç –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è JSON –∑ job functions —Ç–∞ tags.</p>
        
        <div>
            <label>Job Functions:</label>
            <input type="text" id="jobFunctions" value="IT,DESIGN" placeholder="IT,DESIGN">
            <small>–í–≤–µ–¥—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—ó —á–µ—Ä–µ–∑ –∫–æ–º—É</small>
        </div>
        
        <div>
            <label>Tags:</label>
            <input type="text" id="tags" value="remote,full-time" placeholder="remote,full-time">
            <small>–í–≤–µ–¥—ñ—Ç—å —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∫–æ–º—É</small>
        </div>
        
        <button onclick="testJsonProcessing()">üß™ –¢–µ—Å—Ç JSON Processing</button>
        <button onclick="testScraping()">üöÄ –¢–µ—Å—Ç Scraping</button>
        <button onclick="testFilterLogic()">üîç –¢–µ—Å—Ç Filter Logic</button>
        
        <div id="jsonResponse" class="response" style="display: none;"></div>
    </div>
    
    <div class="test-section">
        <h2>üìä –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω</h2>
        <p>–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –æ–±—Ä–æ–±–∫—É –∑–∞–ø–∏—Ç—ñ–≤.</p>
        <ul>
            <li>üß™ <code>/api/test-json</code> - —Ç–µ—Å—Ç—É—î –æ–±—Ä–æ–±–∫—É JSON</li>
            <li>üöÄ <code>/api/scrape</code> - –∑–∞–ø—É—Å–∫–∞—î —Å–∫—Ä–∞–ø—ñ–Ω–≥</li>
            <li>üîç <code>/api/test-filter</code> - —Ç–µ—Å—Ç—É—î –ª–æ–≥—ñ–∫—É —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó</li>
        </ul>
    </div>

    <script>
        async function testJsonProcessing() {
            const jobFunctions = document.getElementById('jobFunctions').value.split(',').map(f => f.trim());
            const tags = document.getElementById('tags').value.split(',').map(t => t.trim());
            
            const requestData = {
                jobFunctions: jobFunctions,
                tags: tags
            };
            
            console.log('Sending request:', requestData);
            
            try {
                const response = await fetch('/api/test-json', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestData)
                });
                
                const result = await response.text();
                document.getElementById('jsonResponse').style.display = 'block';
                document.getElementById('jsonResponse').textContent = result;
                
                console.log('Response:', result);
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('jsonResponse').style.display = 'block';
                document.getElementById('jsonResponse').textContent = 'Error: ' + error.message;
            }
        }
        
        async function testScraping() {
            const jobFunctions = document.getElementById('jobFunctions').value.split(',').map(f => f.trim());
            const tags = document.getElementById('tags').value.split(',').map(t => t.trim());
            
            const requestData = {
                jobFunctions: jobFunctions,
                tags: tags
            };
            
            console.log('Starting scraping with:', requestData);
            
            try {
                const response = await fetch('/api/scrape', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestData)
                });
                
                const result = await response.json();
                document.getElementById('jsonResponse').style.display = 'block';
                document.getElementById('jsonResponse').textContent = JSON.stringify(result, null, 2);
                
                console.log('Scraping result:', result);
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('jsonResponse').style.display = 'block';
                document.getElementById('jsonResponse').textContent = 'Error: ' + error.message;
            }
        }
        
        async function testFilterLogic() {
            const jobFunctions = document.getElementById('jobFunctions').value.split(',').map(f => f.trim());
            const tags = document.getElementById('tags').value.split(',').map(t => t.trim());
            
            const requestData = {
                jobFunctions: jobFunctions,
                tags: tags
            };
            
            console.log('Testing filter logic with:', requestData);
            
            try {
                const response = await fetch('/api/test-filter', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestData)
                });
                
                const result = await response.text();
                document.getElementById('jsonResponse').style.display = 'block';
                document.getElementById('jsonResponse').textContent = result;
                
                console.log('Filter test result:', result);
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('jsonResponse').style.display = 'block';
                document.getElementById('jsonResponse').textContent = 'Error: ' + error.message;
            }
        }
    </script>
</body>
</html>
